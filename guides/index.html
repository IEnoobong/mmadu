<!doctype html>
<!--[if IE 9]>
<html class="lt-ie10" lang="en"> <![endif]-->
<html class="no-js" lang="en" data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mmadu Service</title>
    <meta name="description" content="User Management Service">
    <meta name="author" content="Your name goes here">
    <meta name="copyright" content="Maybe consider a Creative Commons license">
    <link rel="stylesheet" href="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.min.css">
    <link rel="stylesheet" href="../css/font-awesome.css">
    <link rel="stylesheet" href="../css/coderay.css">
    <link rel="stylesheet" href="../css/asciidoctor.css">
    <script src="../js/vendor/modernizr.js"></script>
    <script src="../js/toc.js"></script>
</head>
<body>


<div class="top-bar">
    <div class="top-bar-left">
        <ul class="menu">
            <a href="../">Mmadu</a>
        </ul>
    </div>
    <div class="top-bar-right">
        <ul class="menu">
            <li><a href="guides">GETTING STARTED</a></li>
            <li><a href="reference">DOCS</a></li>
            <li><a href="community">COMMUNITY</a></li>
            <li><a href="blog">BLOG</a></li>
        </ul>
    </div>
</div>


<!-- Main Page Content and Sidebar -->

<div class="row">

    <!-- Main Blog Content -->
    <div class="large-9 columns" role="content">

        <h1>Getting Started Guides</h1>
<div class="sect1">
<h2 id="using_mmadu">Using Mmadu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mmadu aims to be highly flexible and customizable. Mmadu is made up of different
components that enables developers to pick and choose which one they need for their application.</p>
</div>
<div class="paragraph">
<p>Currently, Mmadu is made up of the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Mmadu User Service</p>
</li>
<li>
<p>Mmadu Registration</p>
</li>
<li>
<p>Mmadu Identity</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting_started_with_the_jars">Getting Started with the Jars</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide assumes that you have MongoDB running at local host (default mongodb port).</p>
</div>
<div class="sect2">
<h3 id="running_the_identity_service">Running the Identity Service</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the identity jar from the releases page.</p>
</li>
<li>
<p>Run the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="sh">java -Dspring.profiles.active=prod -Dmmadu.identity.url=http://localhost:15553 -Dserver.port=15553 -Dmmadu.identity.db.uri=mongodb://localhost/mmadu_local_db -jar mmadu-identity-2.0.0.jar</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="running_the_user_service">Running the User Service</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the user service jar from the releases page.</p>
</li>
<li>
<p>Run the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="sh">java -Dspring.profiles.active=prod -Dmmadu.identity.url=http://localhost:15553 -Dserver.port=15551 -Dmmadu.registration.db.uri=mongodb://localhost/mmadu_local_db -jar mmadu-user-service-2.0.0.jar</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="running_the_registration_service">Running the Registration Service</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the registration service jar from the releases page.</p>
</li>
<li>
<p>Run the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="sh">java -Dspring.profiles.active=prod -Dmmadu.identity.url=http://localhost:15553 -Dserver.port=15552 -Dmmadu.user.db.uri=mongodb://localhost/mmadu_local_db -jar mmadu-registration-2.0.0.jar</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting_started_with_docker">Getting Started with Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide assumes that you have MongoDB running at local host (default mongodb port).</p>
</div>
<div class="sect2">
<h3 id="running_the_identity_service_2">Running the Identity Service</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pull the Docker Image</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="sh">docker pull geraldoyudo/mmadu-identity:2.0.0</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start the Identity Container</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="sh">docker run -it -p 15553:8080 -e MMADU_IDENTITY_DB_URI='http://localhost/mongodb' -e SPRING_PROFILES_ACTIVE=prod -e MMADU_IDENTITY_URL=http://localhost:15553 geraldoyudo/mmadu-identity:2.0.0</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="running_the_user_service_2">Running the User Service</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pull the Docker Image</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="sh">docker pull geraldoyudo/mmadu-user-service:2.0.0</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start the User Service Container</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="sh">docker run -it -p 15551:8080 -e MMADU_USER_DB_URI='http://localhost/mongodb' -e SPRING_PROFILES_ACTIVE=prod -e MMADU_IDENTITY_URL=http://localhost:15553 geraldoyudo/mmadu-user-service:2.0.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>This also needs a reference to the identity provider.</p>
</div>
</div>
<div class="sect2">
<h3 id="running_the_registration_service_2">Running the Registration Service</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pull the Docker Image</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="sh">docker pull geraldoyudo/mmadu-registration-service:2.0.0</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start the Registration Service Container</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="sh">docker run -it -p 15552:8080 -e MMADU_USER_DB_URI='http://localhost/mongodb' -e SPRING_PROFILES_ACTIVE=prod -e MMADU_IDENTITY_URL=http://localhost:15553 -e MMADU_USER_URL=http://localhost:15551 geraldoyudo/mmadu-registration:2.0.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>This also needs a reference to the identity provider.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting_started_with_docker_compose">Getting Started with Docker Compose</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To run Mmadu with all the services, use the docker-compose file:</p>
</div>
<div class="paragraph">
<p>Create a docker compose file as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="yaml"><span class="key">version</span>: <span class="string"><span class="content">'2'</span></span>
<span class="key">services</span>:
  <span class="key">mmadu-user-service</span>:
    <span class="key">image</span>: <span class="string"><span class="content">geraldoyudo/mmadu-user-service:2.0.0</span></span>
    <span class="key">environment</span>:
      - <span class="string"><span class="content">SPRING_PROFILES_ACTIVE=prod</span></span>
      - <span class="string"><span class="content">MMADU_USER_DB_URI=mongodb://mongodb/mmadu_db</span></span>
      - <span class="string"><span class="content">MMADU_IDENTITY_URL=http://mmadu-identity:8080</span></span>
      - <span class="string"><span class="content">MMADU_ADMIN_CLIENT=mmadu_admin</span></span>
      - <span class="string"><span class="content">MMADU_ADMIN_SECRET=1234567890</span></span>
      - <span class="string"><span class="content">MMADU_ADMIN_USERNAME=admin</span></span>
      - <span class="string"><span class="content">MMADU_ADMIN_PASSWORD=password</span></span>
    <span class="key">ports</span>:
      - <span class="string"><span class="delimiter">&quot;</span><span class="content">15551:8080</span><span class="delimiter">&quot;</span></span>
    <span class="key">depends_on</span>:
      - <span class="string"><span class="content">mongodb</span></span>
      - <span class="string"><span class="content">mmadu-identity</span></span>
  <span class="key">mmadu-registration</span>:
    <span class="key">image</span>: <span class="string"><span class="content">geraldoyudo/mmadu-registration:2.0.0</span></span>
    <span class="key">environment</span>:
      - <span class="string"><span class="content">SPRING_PROFILES_ACTIVE=prod</span></span>
      - <span class="string"><span class="content">MMADU_USER_URL=http://mmadu-user-service:8080</span></span>
      - <span class="string"><span class="content">MMADU_REGISTRATION_DB_URI=mongodb://mongodb/mmadu_db</span></span>
      - <span class="string"><span class="content">MMADU_IDENTITY_URL=http://mmadu-identity:8080</span></span>
      - <span class="string"><span class="content">MMADU_ADMIN_CLIENT=mmadu_admin</span></span>
      - <span class="string"><span class="content">MMADU_ADMIN_SECRET=1234567890</span></span>
      - <span class="string"><span class="content">MMADU_REGISTRATION_ROOT_DIR=/home/mmadu</span></span>
      - <span class="string"><span class="content">MMADU_APPLICATION_URL=http://localhost:8080</span></span>
    <span class="key">volumes</span>:
      - <span class="string"><span class="content">/home/mmadu:/home/mmadu:rw</span></span>
    <span class="key">ports</span>:
      - <span class="string"><span class="delimiter">&quot;</span><span class="content">15552:8080</span><span class="delimiter">&quot;</span></span>
    <span class="key">depends_on</span>:
      - <span class="string"><span class="content">mongodb</span></span>
      - <span class="string"><span class="content">mmadu-identity</span></span>
      - <span class="string"><span class="content">mmadu-user-service</span></span>
  <span class="key">mmadu-identity</span>:
    <span class="key">image</span>: <span class="string"><span class="content">geraldoyudo/mmadu-identity:2.0.0</span></span>
    <span class="key">environment</span>:
      - <span class="string"><span class="content">SPRING_PROFILES_ACTIVE=prod</span></span>
      - <span class="string"><span class="content">MMADU_IDENTITY_DB_URI=mongodb://mongodb/mmadu_db</span></span>
      - <span class="string"><span class="content">MMADU_USER_URL=http://mmadu-user-service:8080</span></span>
      - <span class="string"><span class="content">MMADU_ADMIN_CLIENT=mmadu_admin</span></span>
      - <span class="string"><span class="content">MMADU_ADMIN_SECRET=1234567890</span></span>
      - <span class="string"><span class="content">MMADU_IDENTITY_URL=http://mmadu-identity:8080</span></span>
      - <span class="string"><span class="content">MMADU_APPLICATION_URL=http://localhost:8080</span></span>
    <span class="key">ports</span>:
      - <span class="string"><span class="delimiter">&quot;</span><span class="content">15553:8080</span><span class="delimiter">&quot;</span></span>
    <span class="key">depends_on</span>:
      - <span class="string"><span class="content">mongodb</span></span>
  <span class="key">mongodb</span>:
    <span class="key">image</span>: <span class="string"><span class="content">mongo:3.4.20-xenial</span></span>
    <span class="key">ports</span>:
      - <span class="string"><span class="delimiter">&quot;</span><span class="content">27017:27017</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This starts up four services:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Mmadu User Management Service running at port 15551</p>
</li>
<li>
<p>Mmadu Registration Service running at 15552</p>
</li>
<li>
<p>Mmmadu Identity Service running at pot 15553</p>
</li>
<li>
<p>A mongo db database running at port 27017</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can make modifications to the file to suite your needs. For example, If you want only the user
management service, and you have your own mongo db, keep the mmadu user service and the mmadu identity.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Mmadu User Service depends on the Mmadu Identity, and uses it as its Oauth 2.0 authorization provider.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="system_initialization">System Initialization</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="identity_service">Identity Service</h3>
<div class="paragraph">
<p>This starts up an identity provider with an admin client with absolute privileges. The default client id is <code>mmadu_admin</code>
and the default secret is <code>1234567890</code>. this can be changed by adding the <code>MMADU_ADMIN_CLIENT</code> and <code>MMADU_ADMIN_SECRET</code> environment
variables to the <code>docker run</code> command.</p>
</div>
<div class="paragraph">
<p>The environment variable MMADU_IDENTITY_URL is needed because it uses itself as an authorization provider.</p>
</div>
</div>
<div class="sect2">
<h3 id="user_service">User Service</h3>
<div class="paragraph">
<p>Once the docker container starts up, it configures a default admin user with user name <code>admin</code>
and the password, <code>password</code>. To change this, set the <code>MMADU_ADMIN_USERNAME</code> and <code>MMADU_ADMIN_PASSWORD</code>
environment variables respectively.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
At start up, all services configure data needed for the functioning of Mmadu. Domain with id <code>0</code>
is reserved for Mmmadu operations.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting_your_journey">Starting Your Journey</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Click the Guides for quick tutorials on Mmadu.</p>
</div>
</div>
</div>

    </div>

    <!-- End Main Content -->

    <!-- Sidebar -->

    <aside class="large-3 columns">

        <h4>Guides</h4>
        <ul>
            
            <li><a href="creating-your-first-domain">Creating Your First Domain</a></li>
            
            <li><a href="user-auth-mmadu-springboot">Authentication - Getting Started with Mmadu And Springboot</a></li>
            
        </ul>

    </aside>

    <!-- End Sidebar -->
</div>

<!-- End Main Content and Sidebar -->




<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.js"></script>
<script>
$(document).foundation();
var doc = document.documentElement;
doc.setAttribute('data-useragent', navigator.userAgent);
</script>
</body>
</html>
